{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ivan_romero/Proyecto_personal/wow/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nexport function scrapeWowheadPage(_x) {\n  return _scrapeWowheadPage.apply(this, arguments);\n}\n\nfunction _scrapeWowheadPage() {\n  _scrapeWowheadPage = _asyncToGenerator(function* (url) {\n    const parsed = new URL(url);\n\n    if (!parsed.hostname.includes('wowhead.com')) {\n      throw new Error('Only wowhead.com URLs are supported.');\n    }\n\n    const proxiedPath = `${parsed.pathname}${parsed.search}${parsed.hash}`;\n    const proxyUrl = proxiedPath.startsWith('/guide') ? proxiedPath : `/guide${proxiedPath}`; // Prefer local proxy to avoid browser CORS issues.\n\n    try {\n      const proxiedResponse = yield fetch(proxyUrl, {\n        method: 'GET',\n        headers: {\n          Accept: 'text/html'\n        }\n      });\n\n      if (proxiedResponse.ok) {\n        return yield proxiedResponse.text();\n      }\n    } catch {// Fallback to direct URL below.\n    }\n\n    const directResponse = yield fetch(url, {\n      method: 'GET',\n      headers: {\n        Accept: 'text/html'\n      }\n    });\n\n    if (!directResponse.ok) {\n      throw new Error(`Failed to scrape URL (${directResponse.status})`);\n    }\n\n    return yield directResponse.text();\n  });\n  return _scrapeWowheadPage.apply(this, arguments);\n}","map":null,"metadata":{},"sourceType":"module"}